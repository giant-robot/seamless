!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("jQuery"),require("waypoints")):"function"==typeof define&&define.amd?define("Seamless",["jQuery","waypoints"],t):"object"==typeof exports?exports.Seamless=t(require("jQuery"),require("waypoints")):e.Seamless=t(e.jQuery,e.waypoints)}("undefined"!=typeof self?self:this,function(n,o){return c={},i.m=r=[function(e,t,n){var c=this,r=n(1),o=n(2);function i(e){this.config=r.extend(!0,{},this.defaults,e),this.cycle=0,this.items=[],this.$container=r(this.config.containerSelector),this.template=this.config.compileTemplate(this.config.template)}i.prototype.defaults={containerSelector:".container",itemSelector:".item",triggerSelector:".item:last",triggerOffset:"bottom-in-view",loadingClass:"is-loading",template:"",compileTemplate:function(e){return e},renderTemplate:function(e,t){},onAppend:function(e){},request:{paged:!1,offsetParam:"offset",offset:0,limitParam:"limit",limit:10},filterResponse:function(e){return e},dripFeed:!1,prefetch:!1,appendOnPrefetch:!1,trackItemTransitions:!0,itemTransitionOffset:"50%",onItemTransition:function(e,t,n){}},i.prototype.init=function(){c.config.trackItemTransitions&&c.trackItemTransitions(r(c.config.itemSelector)),c.config.prefetch&&c.config.appendOnPrefetch?c.loadItems():(c.config.prefetch&&c.getItems(),c.trackLoadNewItems())},i.prototype.trackLoadNewItems=function(){var e=c;new o({element:c.config.triggerSelector,group:"load_items",handler:function(){c.destroy(),e.loadItems()},offset:c.config.triggerOffset})},i.prototype.trackItemTransitions=function(e){var r=c;new o({element:e.get(0),group:"item_transitions",handler:function(e){var t="down"===e?c.previous():c,n="down"===e?c:c.previous(),o=t?t.element:null,i=n?n.element:null;r.config.onItemTransition(o,i,e)},offset:c.config.itemTransitionOffset})},i.prototype.loadItems=function(){console.log("loading..");var t=c;c.$container.addClass(c.config.loadingClass),c.getItems(function(e){0<e.length&&(t.append(e),t.trackLoadNewItems()),t.$container.removeClass(t.config.loadingClass),t.cycle++})},i.prototype.getItems=function(e){console.log("getting...");function t(e){var t;e=e||r.noop,n.config.dripFeed?(console.log("drip feeding..."),t=n.items.length>n.cycle?[n.items[n.cycle]]:[]):(console.log("clearing"),t=n.items,n.items=[]),e(t)}var n=c;0===c.items.length?c.remoteGet(function(){t(e)}):t(e)},i.prototype.remoteGet=function(e){console.log("remote getting...");var t=c,n=[],o=c.config.filterResponse,i=r.extend(!0,{},c.config.request);e=e||r.noop,c.config.request.paged&&(i.data=i.data||{},i.data[c.config.request.offsetParam]=c.cycle*c.config.request.limit+c.config.request.offset,i.data[c.config.request.limitParam]=c.config.request.limit),i.success=function(e){n=o(e)},i.complete=[],i.complete.push(function(){t.items=n}),i.complete.push(e),r.ajax(i)},i.prototype.append=function(e){if(console.log("appending..."),0<e.length)for(var t=0;t<e.length;t++){var n=r(c.config.renderTemplate(c.template,e[t]));c.$container.append(n),c.config.onAppend(n),c.config.trackItemTransitions&&c.trackItemTransitions(n)}},e.exports=i},function(e,t){e.exports=n},function(e,t){e.exports=o}],i.c=c,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(n,o,function(e){return t[e]}.bind(null,o));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=0);function i(e){if(c[e])return c[e].exports;var t=c[e]={i:e,l:!1,exports:{}};return r[e].call(t.exports,t,t.exports,i),t.l=!0,t.exports}var r,c});